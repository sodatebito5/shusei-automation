<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自動配席アプリ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- ヘッダー -->
<div class="header">
    <div class="header-left">
        <button class="btn btn-load" id="load-btn">
            データ読込
        </button>
        <button class="btn btn-archive" id="load-archive-btn" style="display: none;">
            続きから読み込む
        </button>
        <button class="btn btn-secondary" id="reset-btn" style="display: none;">
            リセット
        </button>
    </div>
    <div class="header-right">
        <button class="btn btn-primary" id="sync-btn" style="display: none;">
            座席反映
        </button>
        <button class="btn btn-print" id="print-preview-btn" style="display: none;">
            印刷プレビュー
        </button>
    </div>
</div>

    <!-- ステータス表示 -->
    <div class="status-bar">
        <span id="status">データを読み込んでください</span>
    </div>

    <!-- サマリー表示 -->
    <div class="summary-section" id="summary">
        <!-- 動的生成 -->
    </div>

    <!-- プレビュー表示 -->
<div class="preview-section" id="preview" style="display: none;">
    <!-- 動的生成 -->
</div>

    <!-- 配席設定 -->
    <div class="config-section" id="configSection" style="display: none;">
        <div class="config-card">
            <h3>⚙️ 配席設定</h3>
            <div class="config-grid">
                <div class="config-item">
                    <label>1卓あたりの最小席数</label>
                    <select id="minCapacity">
                        <option value="4">4人</option>
                        <option value="5">5人</option>
                        <option value="6" selected>6人</option>
                    </select>
                </div>
                <div class="config-item">
                    <label>1卓あたりの最大席数</label>
                    <select id="maxCapacity">
                        <option value="6">6人</option>
                        <option value="7">7人</option>
                        <option value="8" selected>8人</option>
                    </select>
                </div>
                <div class="config-item">
                    <label>テーブル数</label>
                    <input type="number" id="tableCount" value="6" min="1" max="20">
                </div>
            </div>

            <!-- 収容人数サマリー -->
            <div class="config-summary" id="configSummary">
                <!-- 動的生成 -->
            </div>

            <!-- テーブルマトリックス候補 -->
            <div class="layout-section" id="layoutSection" style="display:none;">
                <h4>🪑 テーブル配置パターン</h4>
                <p class="layout-hint">
                    6卓以上の場合、テーブルの並び方を最大3案提案します。<br>
                    いずれか1つを選択すると「配席表を生成」が有効になります。
                </p>
                <div class="layout-options" id="layoutOptions">
                    <!-- 動的生成 -->
                </div>
            </div>

            <button class="btn btn-generate" id="generateBtn" disabled>
                配席表を生成
            </button>
        </div>
    </div>
    
    <!-- メインコンテナ（2カラムレイアウト） -->
    <div class="main-container" id="mainContainer" style="display: none;">
        <!-- 中央：配席エリア -->
        <div class="seating-area">
            <div class="tables-grid" id="tablesGrid">
                <!-- 動的生成 -->
            </div>
        </div>
        
        <!-- 右：待機ゾーン＋特殊枠 -->
        <div class="side-zone">
            <!-- PA枠 -->
            <div class="special-zone">
                <div class="special-header">🎤 PA枠</div>
                <div class="special-list" id="paList">
                    <!-- 動的生成 -->
                </div>
            </div>

            <!-- 司会枠 -->
            <div class="special-zone">
                <div class="special-header">🎙️ 司会枠</div>
                <div class="special-list" id="mcList">
                    <!-- 動的生成 -->
                </div>
            </div>

            <!-- 待機ゾーン -->
            <div class="waiting-zone">
                <div class="waiting-header">待機ゾーン</div>
                <div class="waiting-list" id="waitingList" data-zone="waiting">
                    <!-- 動的生成 -->
                </div>
            </div>
        </div>
    </div>

<!-- 自動配席選択モーダル（新規追加） -->
<div class="auto-seat-modal" id="autoSeatModal" style="display: none;">
    <div class="auto-seat-modal-content">
        <div class="auto-seat-modal-header">
            <h3>自動配席方法を選択</h3>
        </div>
        
        <div class="auto-seat-buttons">
            <button class="btn btn-auto-large" id="autoTeamBtnModal">
                👥 同チーム優先
            </button>
            <button class="btn btn-auto-large" id="autoBusinessBtnModal">
                🤝 営業相性優先
            </button>
        </div>
    </div>
</div>

    <!-- 印刷プレビューモーダル -->
<div class="print-modal" id="printModal" style="display: none;">
    <div class="print-modal-content">
        <div class="print-modal-header">
            <h3>🖨️ 印刷プレビュー</h3>
            <button class="print-modal-close" id="printModalClose">✕</button>
        </div>
        
        <div class="print-controls">
            <label>用紙サイズ:</label>
            <button class="btn-paper-size" data-size="a4">A4</button>
            <button class="btn-paper-size active" data-size="a3">A3</button>
            <button class="btn btn-primary" id="executePrintBtn">印刷する</button>
        </div>
        
        <div class="print-preview-area" id="printPreviewArea">
            <!-- 動的生成 -->
        </div>
    </div>
</div>

<!-- 差分確認モーダル -->
<div class="diff-modal" id="diffModal" style="display: none;">
    <div class="diff-modal-content">
        <div class="diff-modal-header">
            <h3>📂 保存した配席を読み込みます</h3>
            <p class="diff-saved-at">保存日時: <span id="diffSavedAt">-</span></p>
        </div>

        <div class="diff-summary">
            <div class="diff-item matched">
                <span class="diff-count" id="diffMatchedCount">0</span>
                <span class="diff-label">名 配席済み</span>
            </div>
            <div class="diff-item new">
                <span class="diff-count" id="diffNewCount">0</span>
                <span class="diff-label">名 新規追加</span>
            </div>
            <div class="diff-item absent">
                <span class="diff-count" id="diffAbsentCount">0</span>
                <span class="diff-label">名 欠席</span>
            </div>
        </div>

        <div class="diff-details" id="diffDetails">
            <!-- 動的生成 -->
        </div>

        <div class="diff-modal-buttons">
            <button class="btn btn-secondary" id="diffCancelBtn">キャンセル</button>
            <button class="btn btn-primary" id="diffApplyBtn">読み込む</button>
        </div>
    </div>
</div>

    <script src="main.js"></script>
</body>
</html><!-- auto-deploy test -->
